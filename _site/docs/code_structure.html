<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Code Structure | UNav-Sim</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Code Structure" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<meta property="og:description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<link rel="canonical" href="http://localhost:4000/docs/code_structure.html" />
<meta property="og:url" content="http://localhost:4000/docs/code_structure.html" />
<meta property="og:site_name" content="UNav-Sim" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Code Structure" />
<script type="application/ld+json">
{"url":"http://localhost:4000/docs/code_structure.html","headline":"Code Structure","@type":"WebPage","description":"Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">UNav-Sim</a></h1>
      

      <h1 id="code-structure">Code Structure</h1>

<h2 id="airlib">AirLib</h2>

<p>Majority of the code is located in AirLib. This is a self-contained library that you should be able to compile with any C++11 compiler.</p>

<p>AirLib consists of the following components:</p>

<ol>
  <li><a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/physics"><em>Physics engine:</em></a> This is header-only physics engine. It is designed to be fast and extensible to implement different vehicles.</li>
  <li><a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/sensors"><em>Sensor models:</em></a> This is header-only models for Barometer, IMU, GPS and Magnetometer.</li>
  <li><a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/vehiclesr"><em>Vehicle models:</em></a> This is header-only models for vehicle configurations and models. Currently we have implemented model for a MultiRotor and a configuration for PX4 QuadRotor in the X config. There are several different Multirotor models defined in MultiRotorParams.hpp including a hexacopter as well.</li>
  <li><a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/api"><em>API-related files:</em></a> This part of AirLib provides abstract base class for our APIs and concrete implementation for specific vehicle platforms such as MavLink. It also has classes for the RPC client and server.</li>
</ol>

<p>Apart from these, all common utilities are defined in <a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/common"><code class="language-plaintext highlighter-rouge">common/</code></a> subfolder. One important file here is <a href="https://github.com/microsoft/AirSim/blob/main/AirLib/include/common/AirSimSettings.hpp">AirSimSettings.hpp</a> which should be modified if any new fields are to be added in <code class="language-plaintext highlighter-rouge">settings.json</code>.</p>

<p>AirSim supports different firmwares for Multirotor such as its own SimpleFlight, PX4 and ArduPilot, files for communicating with each firmware are placed in their respective subfolders in <a href="https://github.com/microsoft/AirSim/tree/main/AirLib/include/vehicles/multirotor/firmwares"><code class="language-plaintext highlighter-rouge">multirotor/firmwares</code></a>.</p>

<p>The vehicle-specific APIs are defined in the <code class="language-plaintext highlighter-rouge">api/</code> subfolder, along-with required structs. The <a href="https://github.com/microsoft/AirSim/tree/main/AirLib/src"><code class="language-plaintext highlighter-rouge">AirLib/src/</code></a> contains .cpp files with implementations of various mehtods defined in the .hpp files. For e.g. <a href="https://github.com/microsoft/AirSim/blob/main/AirLib/src/vehicles/multirotor/api/MultirotorApiBase.cpp">MultirotorApiBase.cpp</a> contains the base implementation of the multirotor APIs, which can also be overridden in the specific firmware files if required.</p>

<h2 id="unrealpluginsairsim">Unreal/Plugins/AirSim</h2>

<p>This is the only portion of project which is dependent on Unreal engine. We have kept it isolated so we can implement simulator for other platforms as well, as has been done for <a href="https://microsoft.github.io/AirSim/Unity.html">Unity</a>. The Unreal code takes advantage of its UObject based classes including Blueprints. The <code class="language-plaintext highlighter-rouge">Source/</code> folder contains the C++ files, while the <code class="language-plaintext highlighter-rouge">Content/</code> folder has the blueprints and assets. Some main components are described below:</p>

<ol>
  <li><em>SimMode_ classes</em>: The SimMode classes help implement many different modes, such as pure Computer Vision mode, where there is no vehicle or simulation for a specific vehicle (currently car and multirotor). The vehicle classes are located in <a href="https://github.com/microsoft/AirSim/tree/main/Unreal/Plugins/AirSim/Source/Vehicles"><code class="language-plaintext highlighter-rouge">Vehicles/</code></a></li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><em>PawnSimApi</em>: This is the <a href="https://github.com/microsoft/AirSim/blob/main/Unreal/Plugins/AirSim/Source/PawnSimApi.cpp">base class</a> for all vehicle pawn visualizations. Each vehicle has their own child (Multirotor</td>
          <td>Car</td>
          <td>ComputerVision)Pawn class.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><a href="https://github.com/microsoft/AirSim/tree/main/Unreal/Plugins/AirSim/Source/UnrealSensors">UnrealSensors</a>: Contains implementation of Distance and Lidar sensors.</li>
  <li><em>WorldSimApi</em>: Implements most of the environment and vehicle-agnostic APIs</li>
</ol>

<p>Apart from these, <a href="https://github.com/microsoft/AirSim/blob/main/Unreal/Plugins/AirSim/Source/PIPCamera.cpp"><code class="language-plaintext highlighter-rouge">PIPCamera</code></a> contains the camera initialization, and <a href="https://github.com/microsoft/AirSim/blob/main/Unreal/Plugins/AirSim/Source/UnrealImageCapture.cpp"><code class="language-plaintext highlighter-rouge">UnrealImageCapture</code></a> &amp; <a href="https://github.com/microsoft/AirSim/blob/main/Unreal/Plugins/AirSim/Source/RenderRequest.cpp"><code class="language-plaintext highlighter-rouge">RenderRequest</code></a> the image rendering code. <a href="https://github.com/microsoft/AirSim/blob/main/Unreal/Plugins/AirSim/Source/AirBlueprintLib.cpp"><code class="language-plaintext highlighter-rouge">AirBlueprintLib</code></a> has a lot of utility and wrapper methods used to interface with the UE4 engine.</p>

<h2 id="mavlinkcom">MavLinkCom</h2>

<p>This is the library developed by our own team member <a href="https://github.com/lovettchris">Chris Lovett</a> that provides C++ classes to talk to the MavLink devices. This library is stand alone and can be used in any project.
See <a href="mavlinkcom.md">MavLinkCom</a> for more info.</p>

<h2 id="sample-programs">Sample Programs</h2>

<p>We have created a few sample programs to demonstrate how to use the API. See HelloDrone and DroneShell.
DroneShell demonstrates how to connect to the simulator using UDP.  The simulator is running a server (similar to DroneServer).</p>

<h2 id="pythonclient">PythonClient</h2>

<p><a href="https://github.com/microsoft/AirSim/tree/main/PythonClient">PythonClient</a> contains Python API wrapper files and sample programs demonstrating their uses.</p>

<h2 id="contributing">Contributing</h2>

<p>See <a href="CONTRIBUTING.md">Contribution Guidelines</a></p>

<h2 id="unreal-framework">Unreal Framework</h2>

<p>The following picture illustrates how AirSim is loaded and invoked by the Unreal Game Engine:</p>

<p><img src="images/airsim_startup.png" alt="AirSimConstruction" /></p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
