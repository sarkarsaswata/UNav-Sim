<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Runtime Texture Swapping | UNav-Sim</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Runtime Texture Swapping" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<meta property="og:description" content="Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features." />
<link rel="canonical" href="http://localhost:4000/docs/retexturing.html" />
<meta property="og:url" content="http://localhost:4000/docs/retexturing.html" />
<meta property="og:site_name" content="UNav-Sim" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Runtime Texture Swapping" />
<script type="application/ld+json">
{"url":"http://localhost:4000/docs/retexturing.html","headline":"Runtime Texture Swapping","@type":"WebPage","description":"Intended as a documentation theme based on Jekyll for technical writers documenting software and other technical products, this theme has all the elements you would need to handle multiple products with both multi-level sidebar navigation, tags, and other documentation features.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://localhost:4000/">UNav-Sim</a></h1>
      

      <h1 id="runtime-texture-swapping">Runtime Texture Swapping</h1>

<h2 id="how-to-make-an-actor-retexturable">How to Make An Actor Retexturable</h2>

<p>To be made texture-swappable, an actor must derive from the parent class TextureShuffleActor.
The parent class can be set via the settings tab in the actor’s blueprint.</p>

<p><img src="images/tex_shuffle_actor.png" alt="Parent Class" /></p>

<p>After setting the parent class to TextureShuffActor, the object gains the member DynamicMaterial.
DynamicMaterial needs to be set–on all actor instances in the scene–to TextureSwappableMaterial.
Warning: Statically setting the Dynamic Material in the blueprint class may cause rendering errors. It seems to work better to set it on all the actor instances in the scene, using the details panel.</p>

<p><img src="images/tex_swap_material.png" alt="TextureSwappableMaterial" /></p>

<h2 id="how-to-define-the-sets-of-textures-to-choose-from">How to Define the Set(s) of Textures to Choose From</h2>

<p>Typically, certain subsets of actors will share a set of texture options with each other. (e.g. walls that are part of the same building)</p>

<p>It’s easy to set up these groupings by using Unreal Engine’s group editing functionality.
Select all the instances that should have the same texture selection, and add the textures to all of them simultaneously via the Details panel.
Use the same technique to add descriptive tags to groups of actors, which will be used to address them in the API.</p>

<p><img src="images/tex_swap_group_editing.png" alt="Group Editing" /></p>

<p>It’s ideal to work from larger groupings to smaller groupings, simply deselecting actors to narrow down the grouping as you go, and applying any individual actor properties last.</p>

<p><img src="images/tex_swap_subset.png" alt="Subset Editing" /></p>

<h2 id="how-to-swap-textures-from-the-api">How to Swap Textures from the API</h2>

<p>The following API is available in C++ and python. (C++ shown)</p>

<pre><code class="language-C++">std::vector&lt;std::string&gt; simSwapTextures(const std::string&amp; tags, int tex_id);
</code></pre>

<p>The string of “,” or “, “ delimited tags identifies on which actors to perform the swap.
The tex_id indexes the array of textures assigned to each actor undergoing a swap.
The function will return the list of objects which matched the provided tags and had the texture swap perfomed.
If tex_id is out-of-bounds for some object’s texture set, it will be taken modulo the number of textures that were available.</p>

<p>Demo (Python):</p>

<pre><code class="language-Python">import airsim
import time

c = airsim.client.MultirotorClient()
print(c.simSwapTextures("furniture", 0))
time.sleep(2)
print(c.simSwapTextures("chair", 1))
time.sleep(2)
print(c.simSwapTextures("table", 1))
time.sleep(2)
print(c.simSwapTextures("chair, right", 0))
</code></pre>

<p>Results:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="s1">'RetexturableChair'</span>, <span class="s1">'RetexturableChair2'</span>, <span class="s1">'RetexturableTable'</span><span class="o">]</span>
<span class="o">[</span><span class="s1">'RetexturableChair'</span>, <span class="s1">'RetexturableChair2'</span><span class="o">]</span>
<span class="o">[</span><span class="s1">'RetexturableTable'</span><span class="o">]</span>
<span class="o">[</span><span class="s1">'RetexturableChair2'</span><span class="o">]</span>
</code></pre></div></div>

<p><img src="images/tex_swap_demo.gif" alt="Demo" /></p>

<p>Note that in this example, different textures were chosen on each actor for the same index value.</p>

<p>You can also use the <code class="language-plaintext highlighter-rouge">simSetObjectMaterial</code> and <code class="language-plaintext highlighter-rouge">simSetObjectMaterialFromTexture</code> APIs to set an object’s material to any material asset or filepath of a texture. For more information on using these APIs, see <a href="apis.md#texture-apis">Texture APIs</a>.</p>


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
